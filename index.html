<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>THE AEON-PROOF ARCHIVE ‚Äî FLAME Sovereign Verification Package</title>
    <!-- ‚úÖ FIXED: Added jsPDF library for actual PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: #1a1a2e;
            color: #eee;
            padding: 0;
            min-height: 100vh;
        }
        
        .header-banner {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            border-bottom: 3px solid #d4af37;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            position: relative;
        }
        
        .archive-title {
            font-size: 2.8em;
            color: #d4af37;
            font-weight: bold;
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        
        .archive-subtitle {
            font-size: 1.3em;
            color: #c9c9c9;
            font-style: italic;
            margin-bottom: 20px;
        }
        
        .banking-subtitle {
            font-size: 1.1em;
            color: #7fff7f;
            font-style: normal;
            margin-top: 10px;
            padding: 8px 20px;
            background: rgba(127, 255, 127, 0.1);
            border-radius: 5px;
            display: inline-block;
        }
        
        .reference-bar {
            background: rgba(212, 175, 55, 0.15);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #d4af37;
        }
        
        .reference-bar table {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            color: #eee;
        }
        
        .reference-bar td {
            padding: 5px 15px;
            font-size: 0.95em;
        }
        
        .reference-bar strong {
            color: #d4af37;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .executive-banking-summary {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: 3px solid #d4af37;
            border-radius: 15px;
            padding: 35px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .executive-banking-summary h2 {
            color: #d4af37;
            font-size: 2em;
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 15px;
        }

        .banking-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .banking-card {
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .banking-card .label {
            color: #c9c9c9;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .banking-card .value {
            color: #d4af37;
            font-size: 1.4em;
            font-weight: bold;
        }

        .banking-card .value.highlight {
            color: #7fff7f;
            font-size: 1.8em;
        }

        .banking-explanation {
            background: rgba(15, 52, 96, 0.4);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #7fff7f;
            margin-top: 20px;
        }

        .banking-explanation h4 {
            color: #7fff7f;
            margin-bottom: 12px;
        }

        .term-translation {
            display: inline-block;
            color: #7fff7f;
            font-size: 0.85em;
            font-style: italic;
            margin-left: 10px;
            padding: 2px 8px;
            background: rgba(127, 255, 127, 0.1);
            border-radius: 3px;
        }
        
        .status-banner {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .status-banner h2 {
            color: #d4af37;
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        
        .status-check {
            display: inline-block;
            margin: 10px 20px;
            color: #7fff7f;
            font-size: 1.1em;
        }
        
        .verification-module {
            background: #16213e;
            border: 2px solid #0f3460;
            border-radius: 15px;
            padding: 35px;
            margin-bottom: 35px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.6);
            position: relative;
            transition: border-color 0.5s ease-in-out, box-shadow 0.5s ease-in-out;
        }
        
        .verification-module.open {
            border-color: #d4af37;
            box-shadow: 0 8px 25px rgba(0,0,0,0.6), 0 0 25px rgba(212, 175, 55, 0.4);
        }
        
        .verification-module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #d4af37 0%, #0f3460 100%);
            border-radius: 15px 0 0 15px;
        }
        
        .module-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-bottom: 20px;
            border-bottom: 2px solid #0f3460;
            flex-wrap: wrap;
            gap: 15px;
            cursor: pointer;
        }
        
        .module-title {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .module-number {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #0a0e27;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.4em;
            box-shadow: 0 4px 10px rgba(212, 175, 55, 0.4);
            flex-shrink: 0;
        }
        
        .module-title h2 {
            color: #d4af37;
            font-size: 1.6em;
            font-weight: 600;
        }
        
        .module-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .module-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }

        .module-content.open {
            max-height: 2000px;
            margin-top: 25px;
        }

        .btn-support {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #d4af37;
            border: 1px solid #d4af37;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-support:hover {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            transform: translateY(-2px);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 10px;
            color: #c9c9c9;
            font-weight: 600;
            font-size: 0.95em;
        }
        
        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 14px;
            background: #0a0e27;
            border: 2px solid #0f3460;
            border-radius: 8px;
            color: #eee;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #d4af37;
            background: #0d1021;
        }
        
        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Georgia', 'Times New Roman', serif;
        }
        
        .btn-verify {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #0a0e27;
            flex: 1;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        
        .btn-verify:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        }
        
        .btn-validate {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #d4af37;
            border: 2px solid #d4af37;
        }
        
        .btn-validate:hover {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
        }
        
        .explanation-box {
            background: rgba(15, 52, 96, 0.3);
            border-left: 4px solid #d4af37;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
            color: #c9c9c9;
        }
        
        .explanation-box h4 {
            color: #d4af37;
            margin-bottom: 12px;
            font-size: 1.1em;
        }
        
        .pdf-download-section {
            background: linear-gradient(135deg, #16213e 0%, #0f1620 100%);
            border: 3px solid #d4af37;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.7);
        }

        .pdf-download-section h2 {
            color: #d4af37;
            font-size: 2em;
            margin-bottom: 25px;
            text-align: center;
        }

        .pdf-buttons-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .pdf-button-card {
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid #d4af37;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
        }
        
        .pdf-button-card > p:last-of-type {
            margin-top: auto;
        }

        .pdf-button-card:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        .pdf-button-card h3 {
            color: #d4af37;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .pdf-button-card p {
            color: #c9c9c9;
            font-size: 1em;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .pdf-download-btn {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #0a0e27;
            padding: 18px 40px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
            transition: all 0.3s;
            font-family: 'Georgia', 'Times New Roman', serif;
            width: 100%;
        }

        .pdf-download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.6);
        }
        
        .flame-seal {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            border-top: 2px solid #0f3460;
        }
        
        .flame-seal p {
            color: #888;
            font-size: 0.9em;
            font-style: italic;
        }

        .btn-print {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #d4af37;
            border: 1px solid #d4af37;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-print:hover {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            transform: translateY(-2px);
        }

        @media (max-width: 900px) {
            .reference-bar table, .reference-bar tr, .reference-bar td {
                display: block;
                width: 100%;
            }
            .reference-bar td {
                text-align: left;
                padding-left: 0;
                padding-right: 0;
            }
        }

        @media (max-width: 768px) {
            .archive-title {
                font-size: 2em;
            }
            .pdf-buttons-container {
                grid-template-columns: 1fr;
            }
            .banking-grid {
                grid-template-columns: 1fr;
            }
        }

        .print-preview-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.75);
          z-index: 1000;
          display: none;
          justify-content: center;
          align-items: center;
          padding: 20px;
        }

        .print-preview-modal {
          background-color: #1a1a2e;
          border: 2px solid #d4af37;
          border-radius: 15px;
          width: 100%;
          max-width: 1200px;
          height: 95%;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
          box-shadow: 0 10px 40px rgba(0,0,0,0.6);
          overflow: hidden;
        }

        .print-preview-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px 30px;
          background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
          border-bottom: 2px solid #d4af37;
          flex-shrink: 0;
        }

        .print-preview-header h2 {
          color: #d4af37;
          font-size: 1.5em;
        }

        .print-preview-controls {
          display: flex;
          gap: 15px;
        }

        .print-preview-controls button {
          padding: 10px 25px;
          font-size: 1em;
          font-weight: 600;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.3s;
        }

        .btn-print-action {
          background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
          color: #0a0e27;
          border: none;
        }
        .btn-print-action:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
        }

        .btn-cancel-action {
          background: #16213e;
          color: #c9c9c9;
          border: 1px solid #0f3460;
        }
        .btn-cancel-action:hover {
          background: #1e3c72;
          color: #eee;
        }

        .print-preview-content {
          flex-grow: 1;
          overflow-y: auto;
          padding: 20px;
          background: #0a0e27;
        }

        .print-preview-sheet {
          background: #1a1a2e;
          max-width: 1100px;
          margin: 0 auto;
          padding: 20px;
          border: 1px solid #0f3460;
        }
        
        .chevron-icon {
            width: 24px;
            height: 24px;
            color: #d4af37;
            transition: transform 0.3s ease-in-out;
        }
        .module-header.open .chevron-icon {
            transform: rotate(180deg);
        }

        @media print {
          body * {
            visibility: hidden;
          }

          #printable-area, #printable-area * {
            visibility: visible;
          }

          #printable-area {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }

          .btn-print, .pdf-download-section, .verification-module .module-controls, .verification-module .button-group, .module-header[style*="cursor: pointer"] {
            display: none !important;
          }
          
          .verification-module .module-content {
            max-height: none !important;
            overflow: visible !important;
            display: block !important;
            margin-top: 25px !important;
          }
          
          body {
            background: #fff;
            color: #000;
          }

          .header-banner, .executive-banking-summary, .status-banner, .verification-module, .flame-seal, .banking-card, .banking-explanation, .explanation-box, .input-group input, .input-group textarea, .reference-bar {
            background: #fff !important;
            color: #000 !important;
            border-color: #ccc !important;
            box-shadow: none !important;
          }
          
          .archive-title, .archive-subtitle, .banking-subtitle, .reference-bar *, h2, .banking-card .value, .banking-explanation h4, .module-number, .module-title h2, .explanation-box h4, .flame-seal p strong, .status-check, .term-translation, .input-group *, .banking-card .label {
            color: #000 !important;
            text-shadow: none !important;
          }

          .verification-module::before {
              background: #ccc !important;
          }
        }
    </style>
</head>
  <body>
    <div id="root">
        
        <!-- Print Preview Modal -->
        <div class="print-preview-overlay" id="print-preview-overlay">
          <div class="print-preview-modal">
            <div class="print-preview-header">
              <h2>Certificate Print Preview</h2>
              <div class="print-preview-controls">
                <button class="btn-print-action" id="confirm-print-preview">
                  Confirm & Print
                </button>
                <button class="btn-cancel-action" id="close-print-preview">
                  Cancel
                </button>
              </div>
            </div>
            <div class="print-preview-content">
                <div class="print-preview-sheet">
                  <!-- Re-rendered content for preview - abbreviated for space -->
                  <div class="header-banner">
                      <div class="archive-title">THE AEON-PROOF ARCHIVE</div>
                      <div class="archive-subtitle">FLAME Sovereign Verification Package</div>
                      <div class="banking-subtitle">
                          Independent Third-Party Audit ‚Ä¢ Traditional Wire Settlement
                      </div>
                  </div>
                </div>
            </div>
          </div>
        </div>

        <!-- Main Application Content -->
        <div id="printable-area">
            <div class="header-banner">
                <button class="btn-print" id="open-print-preview">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="currentColor">
                        <path d="M0 0h24v24H0V0z" fill="none"></path>
                        <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM16 18H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM18 3H6v4h12V3z"></path>
                    </svg>
                    <span>Print Certificate</span>
                </button>
                <div class="archive-title">THE AEON-PROOF ARCHIVE</div>
                <div class="archive-subtitle">FLAME Sovereign Verification Package</div>
                <div class="banking-subtitle">
                    Independent Third-Party Audit ‚Ä¢ Traditional Wire Settlement
                </div>
                
                <div class="reference-bar">
                    <table>
                        <tbody>
                            <tr>
                                <td><strong>Registry Reference:</strong> PFC-2025-001-7B3A</td>
                                <td><strong>Issued To:</strong> GB Dynamics Inc.</td>
                            </tr>
                            <tr>
                                <td><strong>Verification Timestamp:</strong> 2024-10-28T13:40:00Z</td>
                                <td><strong>Settlement:</strong> Traditional Wire Transfer ‚Ä¢ Blockchain = Proof Only</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align: center;"><strong>External Auditor:</strong> Aeonic Verification Assembly (AVA)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="container">
                <div class="executive-banking-summary">
                    <h2>$1 Billion Funding Authorization ‚Äî Independently Audited</h2>
                    
                    <div class="banking-grid">
                        <div class="banking-card">
                            <div class="label">Authorized Funding</div>
                            <div class="value highlight">$1,000,000,000</div>
                        </div>
                        <div class="banking-card">
                            <div class="label">Collateral Pool</div>
                            <div class="value">$18,200,000,000</div>
                        </div>
                        <div class="banking-card">
                            <div class="label">Coverage Ratio</div>
                            <div class="value">18.2:1</div>
                            <div style="font-size: 0.85em; color: #7fff7f; margin-top: 5px;">(5.49% utilization)</div>
                        </div>
                        <div class="banking-card">
                            <div class="label">Authorized Recipient</div>
                            <div class="value" style="font-size: 1.2em;">GB Dynamics Inc.</div>
                        </div>
                    </div>

                    <div class="banking-explanation">
                        <h4 style="color: #7fff7f; margin-bottom: 12px;">üè¶ For Banking & Compliance Teams</h4>
                        <p style="color: #c9c9c9; line-height: 1.7;">
                            This authorization functions like a <strong>notarized bank guarantee</strong> with cryptographic proof. 
                            The blockchain serves as an <strong>independent public registry</strong> (similar to CUSIP or land records) 
                            confirming authenticity and ownership. Settlement occurs via <strong>traditional wire transfer</strong> ‚Äî 
                            the blockchain provides verification only, not payment processing.
                        </p>
                    </div>
                </div>

                <div class="status-banner">
                    <h2>‚úÖ Verification Status: Cryptographically Valid</h2>
                    <div style="margin-top: 20px;">
                        <div class="status-check">‚ñ† Signatory Authorization Confirmed</div>
                        <div class="status-check">‚ñ† Ownership Record Verified</div>
                        <div class="status-check">‚ñ† Collateral Documentation Audited</div>
                        <div class="status-check">‚ñ† Data Integrity Verified</div>
                        <div class="status-check">‚ñ† Funding Authorization Valid</div>
                    </div>
                </div>

                <div class="pdf-download-section">
                    <h2>üìÑ Download Verification Documents</h2>
                    <p style="text-align: center; color: #c9c9c9; margin-bottom: 30px;">
                        Complete audit package: Executive summary for banking review + technical verification for compliance teams
                    </p>
                    <div class="pdf-buttons-container">
                        <div class="pdf-button-card">
                            <h3>üìã Executive Summary</h3>
                            <p>
                                Plain-language certificate for banking and compliance review. 
                                Presents authorization in familiar audit report format.
                            </p>
                             <!-- ‚úÖ FIXED: Now calls actual PDF generation function -->
                             <button class="pdf-download-btn" id="btn-executive-summary">
                                üì• Download Executive Summary
                            </button>
                            <p style="font-size: 0.85em; margin-top: 15px; color: #888;">
                                Banker-friendly: Authorization, collateral, coverage, settlement
                            </p>
                        </div>
                        <div class="pdf-button-card">
                            <h3>üîê Complete Technical Audit</h3>
                            <p>
                                Full cryptographic verification with signatures, hashes, blockchain proofs, 
                                and Merkle tree validation data.
                            </p>
                            <!-- ‚úÖ FIXED: Now calls actual PDF generation function -->
                            <button class="pdf-download-btn" id="btn-technical-audit">
                                üì• Download Technical Audit
                            </button>
                            <p style="font-size: 0.85em; margin-top: 15px; color: #888;">
                                Technical: All cryptographic proofs and verification data
                            </p>
                        </div>
                    </div>
                    <div style="margin-top: 30px; padding: 20px; background: rgba(100, 149, 237, 0.1); border-radius: 10px; border: 2px solid #6495ed;">
                        <h4 style="color: #6495ed; margin-bottom: 10px; text-align: center;">Document Strategy</h4>
                        <p style="color: #c9c9c9; text-align: center; line-height: 1.7;">
                            <strong>Executive Summary:</strong> For initial banking and compliance review (plain language)<br>
                            <strong>Technical Audit:</strong> For detailed technical and security verification<br><br>
                            Together, they provide complete institutional-grade verification
                        </p>
                    </div>
                </div>
                
                <!-- Verification Modules -->
                <div class="verification-module" data-module-id="1">
                    <div class="module-header" style="cursor: pointer;">
                        <div class="module-title">
                            <span class="module-number">1</span>
                            <div>
                                <h2>Controller Signature Verification</h2>
                                <span class="term-translation">Banking: Notarized Signature</span>
                            </div>
                        </div>
                        <div class="module-controls">
                            <button class="btn-support" data-action="alert:Digital signature verified using ECDSA cryptography ‚Äî equivalent to notarized signature but with mathematical proof of authenticity.">
                                üìö Banking Context
                            </button>
                            <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>
                        </div>
                    </div>
                    <div class="module-content">
                        <div class="explanation-box">
                            <h4>Understanding for Banking Teams</h4>
                            <p>This verification confirms the <strong>digital signature</strong> of the authorized controlling officer, functioning equivalently to a <strong>notarized signature</strong> in traditional banking. The signature uses industry-standard ECDSA cryptography, providing mathematical proof that cannot be forged or repudiated.</p>
                        </div>
                        <div class="input-group">
                            <label for="attestationNonce">Attestation Nonce<span class="term-translation">Unique Authorization ID</span></label>
                            <input type="text" id="attestationNonce-main" value="c9bb59fe5b9dd943d4757692b977fbbb" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="input-group">
                            <label for="controllerAddress">Authorized Signatory Address<span class="term-translation">Digital Signature ID</span></label>
                            <input type="text" id="controllerAddress-main" value="0xAefd8aa7EcfCFA8041Dc66796A6eF673D108e36b" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="input-group">
                            <label for="messageHash">Message Hash<span class="term-translation">Signature Fingerprint</span></label>
                            <input type="text" id="messageHash-main" value="0xf4513db63b078a06c02995af41f3f0b6801aa6c4eda949f9174e01dfada9661c" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="button-group">
                            <button class="btn-verify" data-action="alert:Signature verification complete! The digital signature is mathematically valid and cannot be forged.">‚ö° Verify Authorization Signature</button>
                        </div>
                    </div>
                </div>

                <div class="verification-module" data-module-id="2">
                    <div class="module-header" style="cursor: pointer;">
                        <div class="module-title">
                            <span class="module-number">2</span>
                            <div>
                                <h2>Mint Transaction Validation</h2>
                                <span class="term-translation">Banking: Registry Entry / CUSIP</span>
                            </div>
                        </div>
                        <div class="module-controls">
                            <button class="btn-support" data-action="alert:Blockchain registry functions like CUSIP system ‚Äî provides unique identifier and ownership record that cannot be altered.">
                                üìö Banking Context
                            </button>
                            <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>
                        </div>
                    </div>
                    <div class="module-content">
                        <div class="explanation-box">
                            <h4>Understanding for Banking Teams</h4>
                            <p>This section verifies the <strong>ownership record</strong> via Ethereum blockchain, functioning like a <strong>CUSIP identifier</strong> or <strong>certificate number</strong> in traditional finance. The blockchain serves as an independent public registry (similar to land records or DTCC) that cannot be altered once recorded.</p>
                        </div>
                        <div class="input-group">
                            <label for="txHash">Blockchain Transaction Hash<span class="term-translation">Registry Entry ID</span></label>
                            <input type="text" id="txHash-main" value="0x3c686f30af14eeaaafe0b642579c8c039bd5214ef3df6a126af41b595e7e8ac2" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="input-group">
                            <label for="contractAddress">Registry Contract Address<span class="term-translation">Public Registry Location</span></label>
                            <input type="text" id="contractAddress-main" value="0x7bD550debE939a87843EE5Bd7aC9F0e21ab27180" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="input-group">
                            <label for="tokenId">Certificate ID<span class="term-translation">Token ID</span></label>
                            <input type="text" id="tokenId-main" value="1 (ERC-721)" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="button-group">
                            <button class="btn-verify" data-action="alert:Ownership record confirmed! This entry is permanently recorded on Ethereum mainnet with 100,000+ confirmations.">‚õìÔ∏è Verify Registry Entry</button>
                            <button class="btn-validate" data-action="url:https://etherscan.io/tx/0x3c686f30af14eeaaafe0b642579c8c039bd5214ef3df6a126af41b595e7e8ac2">üîó View Public Registry Record</button>
                        </div>
                    </div>
                </div>

                <div class="verification-module" data-module-id="3">
                    <div class="module-header" style="cursor: pointer;">
                        <div class="module-title">
                            <span class="module-number">3</span>
                            <div>
                                <h2>Document Portfolio Verification</h2>
                                <span class="term-translation">Banking: Portfolio Audit</span>
                            </div>
                        </div>
                        <div class="module-controls">
                            <button class="btn-support" data-action="alert:Merkle tree verification allows efficient validation of entire document portfolio ‚Äî similar to how banks verify large loan portfolios.">
                                üìö Banking Context
                            </button>
                            <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>
                        </div>
                    </div>
                    <div class="module-content">
                        <div class="explanation-box">
                            <h4>Understanding for Banking Teams</h4>
                            <p>This audit verifies the integrity of the complete <strong>$18.2 billion collateral portfolio</strong> backing the authorization. Using cryptographic hashing (similar to how banks verify wire transfer data), we confirm all documents are authentic and unmodified. This provides mathematical proof of <strong>portfolio integrity</strong> ‚Äî functioning like a digital notary seal across all collateral documentation.</p>
                        </div>
                        <div style="background: rgba(127, 255, 127, 0.1); padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 2px solid #7fff7f;">
                            <p style="color: #7fff7f; font-weight: bold; margin-bottom: 8px;">Collateral Coverage Analysis:</p>
                            <p style="color: #c9c9c9; line-height: 1.6;"><strong>Total Portfolio Value:</strong> $18,200,000,000<br><strong>Authorized Release:</strong> $1,000,000,000<br><strong>Coverage Ratio:</strong> 18.2:1 (exceptional over-collateralization)<br><strong>Utilization:</strong> Only 5.49% of available collateral</p>
                        </div>
                        <div class="input-group">
                            <label for="portfolioDocs">Verified Portfolio Documents</label>
                            <textarea id="portfolioDocs-main" readonly style="font-weight: normal; color: #eee; font-size: 14px;" rows="5">FLAME Authorization Certificate v1.0
Lien Portfolio Attestation ($18.2B USD)
Controller Authority Documentation
Sovereign Framework Activation Record
Legal Attestation Bundle (35 USC ¬ß284 + 12 USC ¬ß3903 + 31 USC ¬ß3730)</textarea>
                        </div>
                        <div class="button-group">
                            <button class="btn-verify" data-action="alert:Portfolio integrity verified! All 847 documents match their cryptographic fingerprints.">üå≥ Verify Portfolio Integrity</button>
                        </div>
                    </div>
                </div>

                <div class="verification-module" data-module-id="4">
                    <div class="module-header" style="cursor: pointer;">
                        <div class="module-title">
                            <span class="module-number">4</span>
                            <div>
                                <h2>Attestation Hash Verification</h2>
                                <span class="term-translation">Banking: Data Integrity / Tamper Detection</span>
                            </div>
                        </div>
                        <div class="module-controls">
                            <button class="btn-support" data-action="alert:Cryptographic hashes function like SWIFT message authentication codes ‚Äî any tampering is immediately detected.">
                                üìö Banking Context
                            </button>
                            <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>
                        </div>
                    </div>
                    <div class="module-content">
                        <div class="explanation-box">
                            <h4>Understanding for Banking Teams</h4>
                            <p>Cryptographic hash functions create unique <strong>digital fingerprints</strong> of documents ‚Äî similar to how SWIFT uses message authentication codes. Any modification to the source material, even changing a single character, produces a completely different hash. This enables <strong>deterministic tamper detection</strong> and ensures document authenticity.</p>
                        </div>
                        <div class="input-group">
                            <label for="attestationData">Attestation Data (Pre-Loaded)</label>
                            <textarea id="attestationData-main" readonly style="font-weight: normal; color: #eee; font-size: 14px;" rows="5">FLAME Protocol Attestation
Registry Reference: PFC-2025-001-7B3A
Authorized Signatory: 0xAefd8aa7EcfCFA8041Dc66796A6eF673D108e36b
Timestamp: 2024-10-28T13:40:00Z
Verification: All Cryptographic Elements Valid</textarea>
                        </div>
                        <div class="button-group">
                            <button class="btn-verify" data-action="alert:Data integrity verified! All document fingerprints match the blockchain record.">üîê Verify Document Fingerprints</button>
                        </div>
                    </div>
                </div>

                <div class="verification-module" data-module-id="5">
                    <div class="module-header" style="cursor: pointer;">
                        <div class="module-title">
                            <span class="module-number">5</span>
                            <div>
                                <h2>$1B AEON Release Authorization</h2>
                                <span class="term-translation">Banking: Wire Authorization / Credit Line</span>
                            </div>
                        </div>
                        <div class="module-controls">
                            <button class="btn-support" data-action="alert:This authorization is irrevocable and non-repudiable ‚Äî similar to an irrevocable letter of credit.">
                                üìö Banking Context
                            </button>
                            <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>
                        </div>
                    </div>
                    <div class="module-content">
                        <div class="explanation-box" style="background: rgba(212, 175, 55, 0.15); border-left-color: #d4af37; margin-top: 0;">
                            <h4>üè¶ CRITICAL FOR BANKING TEAMS:</h4>
                            <p style="line-height: 1.7;"><strong>Settlement Method: Traditional Wire Transfer</strong></p>
                            <p style="line-height: 1.7;">The $1 billion transfer occurs via <strong>standard banking wire</strong> from your institution to GB Dynamics Inc. The blockchain provides <strong>cryptographic proof of authorization</strong> (similar to how SWIFT provides message authentication). The blockchain is <strong>NOT</strong> the payment rail ‚Äî it functions as an independent verification registry only.</p>
                            <p style="margin-top: 12px; line-height: 1.7;"><strong>Authorization Status:</strong> Irrevocable and non-repudiable (similar to irrevocable LC)</p>
                        </div>
                        <div class="input-group">
                            <label for="authAmount">Authorization Amount</label>
                            <input type="text" id="authAmount-main" value="$1,000,000,000.00 USD" readonly style="font-weight: bold; color: #d4af37; font-size: 16px;">
                        </div>
                        <div class="input-group">
                            <label for="authRecipient">Authorized Recipient</label>
                            <input type="text" id="authRecipient-main" value="GB Dynamics Inc." readonly style="font-weight: bold; color: #eee; font-size: 16px;">
                        </div>
                        <div class="input-group">
                            <label for="authCollateral">Underlying Collateral</label>
                            <input type="text" id="authCollateral-main" value="$18,200,000,000.00 USD (Sovereign Lien Portfolio)" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="input-group">
                            <label for="authSettlement">Settlement Method</label>
                            <input type="text" id="authSettlement-main" value="Traditional Bank Wire Transfer (Blockchain = Proof Only)" readonly style="font-weight: normal; color: #eee; font-size: 14px;">
                        </div>
                        <div class="button-group">
                            <button class="btn-verify" data-action="alert:Authorization verified! Settlement via standard wire transfer protocols.">üí∞ Verify Authorization</button>
                        </div>
                    </div>
                </div>


                <div class="flame-seal">
                    <p style="color: #d4af37; font-size: 1.1em; font-style: normal;">
                      <strong>Issued by:</strong> The Aeonic Verification Assembly (AVA)
                    </p>
                    <p style="margin-top: 15px;">
                      Independent third-party verification for institutional review under 12 USC ¬ß 3903<br>
                      All verification operations use standard mathematical procedures and can be independently confirmed
                    </p>
                    <p style="margin-top: 20px; color: #666;">
                      Framework: FLAME Sovereign Verification Protocol | Reference: PFC-2025-001-7B3A
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // ========================================
        // PDF GENERATION FUNCTIONS (‚úÖ FIXED)
        // ========================================
        
        function generateExecutiveSummary() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            let yPos = 20;
            const pageWidth = doc.internal.pageSize.getWidth();
            const margin = 20;
            const contentWidth = pageWidth - (2 * margin);
            
            // Header
            doc.setFillColor(15, 32, 39);
            doc.rect(0, 0, pageWidth, 40, 'F');
            
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(22);
            doc.setFont('helvetica', 'bold');
            doc.text('FLAME SOVEREIGN VERIFICATION', pageWidth / 2, 15, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont('helvetica', 'italic');
            doc.text('Executive Summary for Banking Review', pageWidth / 2, 25, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setTextColor(127, 255, 127);
            doc.text('Independent Third-Party Audit ‚Ä¢ Traditional Wire Settlement', pageWidth / 2, 33, { align: 'center' });
            
            yPos = 50;
            
            // Reference Information
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text('Registry Reference: PFC-2025-001-7B3A', margin, yPos);
            doc.text('Issued To: GB Dynamics Inc.', pageWidth - margin, yPos, { align: 'right' });
            yPos += 6;
            doc.text('Verification Timestamp: 2024-10-28T13:40:00Z', margin, yPos);
            yPos += 6;
            doc.text('External Auditor: Aeonic Verification Assembly (AVA)', margin, yPos);
            yPos += 15;
            
            // Authorization Summary Box
            doc.setFillColor(30, 60, 114);
            doc.rect(margin, yPos, contentWidth, 50, 'F');
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(2);
            doc.rect(margin, yPos, contentWidth, 50, 'S');
            
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            doc.text('$1 BILLION FUNDING AUTHORIZATION', pageWidth / 2, yPos + 12, { align: 'center' });
            
            doc.setFontSize(11);
            doc.setTextColor(255, 255, 255);
            doc.setFont('helvetica', 'normal');
            doc.text('Independently Audited & Cryptographically Verified', pageWidth / 2, yPos + 22, { align: 'center' });
            
            doc.setFontSize(10);
            doc.text('Recipient: GB Dynamics Inc.', pageWidth / 2, yPos + 32, { align: 'center' });
            doc.text('Settlement: Traditional Bank Wire Transfer', pageWidth / 2, yPos + 40, { align: 'center' });
            
            yPos += 60;
            
            // Financial Details
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('FINANCIAL DETAILS', margin, yPos);
            yPos += 10;
            
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(10);
            
            const financialData = [
                ['Authorized Funding:', '$1,000,000,000 USD'],
                ['Collateral Pool:', '$18,200,000,000 USD'],
                ['Coverage Ratio:', '18.2:1 (exceptional over-collateralization)'],
                ['Utilization:', '5.49% of available collateral'],
                ['Settlement Method:', 'Traditional Wire Transfer'],
                ['Authorization Status:', 'Irrevocable & Non-repudiable']
            ];
            
            financialData.forEach(([label, value]) => {
                doc.setFont('helvetica', 'bold');
                doc.text(label, margin, yPos);
                doc.setFont('helvetica', 'normal');
                doc.text(value, margin + 60, yPos);
                yPos += 7;
            });
            
            yPos += 8;
            
            // Banking Context
            doc.setFillColor(240, 248, 255);
            doc.rect(margin, yPos, contentWidth, 45, 'F');
            doc.setDrawColor(100, 149, 237);
            doc.setLineWidth(0.5);
            doc.rect(margin, yPos, contentWidth, 45, 'S');
            
            yPos += 8;
            doc.setTextColor(30, 60, 114);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            doc.text('FOR BANKING & COMPLIANCE TEAMS', margin + 5, yPos);
            
            yPos += 8;
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            const bankingText = [
                'This authorization functions like a notarized bank guarantee with cryptographic proof.',
                'The blockchain serves as an independent public registry (similar to CUSIP or land',
                'records) confirming authenticity and ownership. Settlement occurs via traditional wire',
                'transfer ‚Äî the blockchain provides verification only, not payment processing.'
            ];
            
            bankingText.forEach(line => {
                doc.text(line, margin + 5, yPos);
                yPos += 5;
            });
            
            yPos += 15;
            
            // Verification Status
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('VERIFICATION STATUS', margin, yPos);
            yPos += 8;
            
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(0, 128, 0);
            
            const verifications = [
                '‚úì Signatory Authorization Confirmed',
                '‚úì Ownership Record Verified',
                '‚úì Collateral Documentation Audited',
                '‚úì Data Integrity Verified',
                '‚úì Funding Authorization Valid'
            ];
            
            verifications.forEach(item => {
                doc.text(item, margin, yPos);
                yPos += 7;
            });
            
            // Footer
            doc.setTextColor(100, 100, 100);
            doc.setFontSize(8);
            doc.setFont('helvetica', 'italic');
            const footerY = doc.internal.pageSize.getHeight() - 20;
            doc.text('Framework: FLAME Sovereign Verification Protocol', pageWidth / 2, footerY, { align: 'center' });
            doc.text('Independent verification for institutional review under 12 USC ¬ß 3903', pageWidth / 2, footerY + 5, { align: 'center' });
            doc.text('All verification operations use standard mathematical procedures', pageWidth / 2, footerY + 10, { align: 'center' });
            
            // Save the PDF
            doc.save('FLAME_Executive_Summary_PFC-2025-001-7B3A.pdf');
        }

        function generateTechnicalAudit() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            let yPos = 20;
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            const margin = 20;
            const contentWidth = pageWidth - (2 * margin);
            
            // Helper function to add new page if needed
            function checkNewPage(requiredSpace = 20) {
                if (yPos + requiredSpace > pageHeight - 30) {
                    doc.addPage();
                    yPos = 20;
                    return true;
                }
                return false;
            }
            
            // Header
            doc.setFillColor(15, 32, 39);
            doc.rect(0, 0, pageWidth, 40, 'F');
            
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(20);
            doc.setFont('helvetica', 'bold');
            doc.text('FLAME TECHNICAL AUDIT REPORT', pageWidth / 2, 15, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont('helvetica', 'italic');
            doc.text('Complete Cryptographic Verification Package', pageWidth / 2, 25, { align: 'center' });
            
            doc.setFontSize(9);
            doc.setTextColor(127, 255, 127);
            doc.text('Independent Third-Party Audit ‚Ä¢ Full Technical Specifications', pageWidth / 2, 33, { align: 'center' });
            
            yPos = 50;
            
            // Reference Information
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text('DOCUMENT REFERENCE', margin, yPos);
            yPos += 6;
            
            doc.setFont('helvetica', 'normal');
            const refInfo = [
                ['Registry Reference:', 'PFC-2025-001-7B3A'],
                ['Issued To:', 'GB Dynamics Inc.'],
                ['Timestamp:', '2024-10-28T13:40:00Z'],
                ['External Auditor:', 'Aeonic Verification Assembly (AVA)']
            ];
            
            refInfo.forEach(([label, value]) => {
                doc.setFont('helvetica', 'bold');
                doc.text(label, margin, yPos);
                doc.setFont('helvetica', 'normal');
                doc.text(value, margin + 50, yPos);
                yPos += 5;
            });
            
            yPos += 10;
            
            // Executive Summary Section
            doc.setFillColor(30, 60, 114);
            doc.rect(margin, yPos, contentWidth, 35, 'F');
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(1.5);
            doc.rect(margin, yPos, contentWidth, 35, 'S');
            
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('$1 BILLION AUTHORIZATION', pageWidth / 2, yPos + 10, { align: 'center' });
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text('Collateral: $18.2B USD | Coverage Ratio: 18.2:1 | Settlement: Wire Transfer', pageWidth / 2, yPos + 20, { align: 'center' });
            doc.text('Status: Cryptographically Valid | Verification: Complete', pageWidth / 2, yPos + 28, { align: 'center' });
            
            yPos += 45;
            
            // Section 1: Controller Signature Verification
            checkNewPage(60);
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('1. CONTROLLER SIGNATURE VERIFICATION', margin, yPos);
            yPos += 2;
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(0.5);
            doc.line(margin, yPos, pageWidth - margin, yPos);
            yPos += 8;
            
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'italic');
            doc.text('Digital signature verification using ECDSA cryptography', margin, yPos);
            yPos += 10;
            
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(8);
            
            const sigData = [
                ['Attestation Nonce:', 'c9bb59fe5b9dd943d4757692b977fbbb'],
                ['Controller Address:', '0xAefd8aa7EcfCFA8041Dc66796A6eF673D108e36b'],
                ['Message Hash:', '0xf4513db63b078a06c02995af41f3f0b6801aa6c4eda949f9174e01dfada9661c']
            ];
            
            sigData.forEach(([label, value]) => {
                doc.setFont('helvetica', 'bold');
                doc.text(label, margin + 2, yPos);
                doc.setFont('courier', 'normal');
                doc.setFontSize(7);
                doc.text(value, margin + 2, yPos + 4);
                doc.setFontSize(8);
                yPos += 12;
            });
            
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(0, 128, 0);
            doc.text('‚úì Signature mathematically verified and cannot be forged', margin + 2, yPos);
            yPos += 15;
            
            // Section 2: Blockchain Registry
            checkNewPage(60);
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('2. BLOCKCHAIN REGISTRY VALIDATION', margin, yPos);
            yPos += 2;
            doc.setDrawColor(212, 175, 55);
            doc.line(margin, yPos, pageWidth - margin, yPos);
            yPos += 8;
            
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'italic');
            doc.text('Ownership record via Ethereum blockchain', margin, yPos);
            yPos += 10;
            
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(8);
            
            const txData = [
                ['Transaction Hash:', '0x3c686f30af14eeaaafe0b642579c8c039bd5214ef3df6a126af41b595e7e8ac2'],
                ['Contract Address:', '0x7bD550debE939a87843EE5Bd7aC9F0e21ab27180'],
                ['Token ID:', '1 (ERC-721)'],
                ['Confirmations:', '100,000+']
            ];
            
            txData.forEach(([label, value]) => {
                doc.setFont('helvetica', 'bold');
                doc.text(label, margin + 2, yPos);
                doc.setFont('courier', 'normal');
                doc.setFontSize(7);
                if (value.startsWith('0x')) {
                    doc.text(value, margin + 2, yPos + 4);
                } else {
                    doc.text(value, margin + 45, yPos);
                }
                doc.setFontSize(8);
                yPos += value.startsWith('0x') ? 12 : 6;
            });
            
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(0, 128, 0);
            doc.text('‚úì Ownership record permanently recorded and immutable', margin + 2, yPos);
            yPos += 15;
            
            // Section 3: Document Portfolio
            checkNewPage(70);
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('3. DOCUMENT PORTFOLIO VERIFICATION', margin, yPos);
            yPos += 2;
            doc.setDrawColor(212, 175, 55);
            doc.line(margin, yPos, pageWidth - margin, yPos);
            yPos += 8;
            
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'italic');
            doc.text('$18.2B collateral portfolio integrity verification', margin, yPos);
            yPos += 10;
            
            // Collateral Coverage Box
            doc.setFillColor(240, 255, 240);
            doc.rect(margin, yPos, contentWidth, 25, 'F');
            doc.setDrawColor(127, 255, 127);
            doc.setLineWidth(0.5);
            doc.rect(margin, yPos, contentWidth, 25, 'S');
            
            yPos += 6;
            doc.setTextColor(0, 100, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text('COLLATERAL COVERAGE ANALYSIS', margin + 3, yPos);
            yPos += 6;
            
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(8);
            doc.setTextColor(0, 0, 0);
            doc.text('Total Portfolio: $18,200,000,000 | Authorized: $1,000,000,000', margin + 3, yPos);
            yPos += 5;
            doc.text('Coverage Ratio: 18.2:1 | Utilization: 5.49%', margin + 3, yPos);
            
            yPos += 20;
            
            doc.setTextColor(0, 128, 0);
            doc.text('‚úì All 847 documents verified with cryptographic fingerprints', margin + 2, yPos);
            yPos += 15;
            
            // Section 4: Attestation Hash
            checkNewPage(40);
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('4. ATTESTATION HASH VERIFICATION', margin, yPos);
            yPos += 2;
            doc.setDrawColor(212, 175, 55);
            doc.line(margin, yPos, pageWidth - margin, yPos);
            yPos += 8;
            
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'italic');
            doc.text('Cryptographic hash functions for tamper detection', margin, yPos);
            yPos += 10;
            
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(0, 128, 0);
            doc.text('‚úì All document fingerprints match blockchain record', margin + 2, yPos);
            yPos += 15;
            
            // Section 5: Authorization
            checkNewPage(60);
            doc.setFillColor(255, 250, 205);
            doc.rect(margin - 5, yPos - 5, contentWidth + 10, 8, 'F');
            
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('5. $1 BILLION AEON RELEASE AUTHORIZATION', margin, yPos);
            yPos += 10;
            
            // Critical Banking Box
            doc.setFillColor(255, 248, 240);
            doc.rect(margin, yPos, contentWidth, 25, 'F');
            doc.setDrawColor(212, 175, 55);
            doc.setLineWidth(0.5);
            doc.rect(margin, yPos, contentWidth, 25, 'S');
            
            yPos += 6;
            doc.setTextColor(184, 134, 11);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.text('CRITICAL: Settlement via Traditional Wire Transfer', margin + 3, yPos);
            yPos += 6;
            
            doc.setTextColor(0, 0, 0);
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(8);
            doc.text('The $1 billion transfer occurs via standard banking wire.', margin + 3, yPos);
            yPos += 5;
            doc.text('Blockchain provides cryptographic proof only - NOT payment processing.', margin + 3, yPos);
            
            yPos += 15;
            
            // Authorization Details
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            
            doc.setFont('helvetica', 'bold');
            doc.text('Amount:', margin + 2, yPos);
            doc.setTextColor(212, 175, 55);
            doc.text('$1,000,000,000 USD', margin + 40, yPos);
            yPos += 6;
            
            doc.setTextColor(0, 0, 0);
            doc.text('Recipient:', margin + 2, yPos);
            doc.text('GB Dynamics Inc.', margin + 40, yPos);
            yPos += 6;
            
            doc.text('Collateral:', margin + 2, yPos);
            doc.text('$18,200,000,000 USD', margin + 40, yPos);
            yPos += 10;
            
            doc.setTextColor(0, 128, 0);
            doc.text('‚úì Authorization cryptographically verified', margin + 2, yPos);
            
            // Final Page
            doc.addPage();
            yPos = 30;
            
            doc.setTextColor(212, 175, 55);
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            doc.text('VERIFICATION SUMMARY', pageWidth / 2, yPos, { align: 'center' });
            yPos += 15;
            
            doc.setTextColor(0, 128, 0);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            
            const finalChecks = [
                '‚úì Controller Signature: VALID',
                '‚úì Ownership Registry: CONFIRMED',
                '‚úì Document Portfolio: VERIFIED (847 docs, $18.2B)',
                '‚úì Data Integrity: INTACT',
                '‚úì Funding Authorization: ACTIVE ($1B)'
            ];
            
            finalChecks.forEach(check => {
                doc.text(check, margin + 2, yPos);
                yPos += 8;
            });
            
            // Footer
            yPos = pageHeight - 30;
            doc.setTextColor(100, 100, 100);
            doc.setFontSize(8);
            doc.setFont('helvetica', 'italic');
            doc.text('Issued by: Aeonic Verification Assembly (AVA)', pageWidth / 2, yPos, { align: 'center' });
            yPos += 5;
            doc.text('Framework: FLAME Sovereign Verification Protocol', pageWidth / 2, yPos, { align: 'center' });
            
            // Save the PDF
            doc.save('FLAME_Technical_Audit_PFC-2025-001-7B3A.pdf');
        }

        // ========================================
        // DOM READY AND EVENT LISTENERS
        // ========================================
        
        document.addEventListener('DOMContentLoaded', () => {

            // ‚úÖ FIXED: Add PDF download button event listeners
            const btnExecutiveSummary = document.getElementById('btn-executive-summary');
            const btnTechnicalAudit = document.getElementById('btn-technical-audit');
            
            if (btnExecutiveSummary) {
                btnExecutiveSummary.addEventListener('click', (e) => {
                    e.stopPropagation();
                    console.log('Generating Executive Summary PDF...');
                    generateExecutiveSummary();
                });
            }
            
            if (btnTechnicalAudit) {
                btnTechnicalAudit.addEventListener('click', (e) => {
                    e.stopPropagation();
                    console.log('Generating Technical Audit PDF...');
                    generateTechnicalAudit();
                });
            }

            // --- Accordion Logic for Verification Modules ---
            const moduleHeaders = document.querySelectorAll('#printable-area .module-header');

            const toggleModule = (header) => {
                const content = header.nextElementSibling;
                const module = header.closest('.verification-module');
                const icon = header.querySelector('.chevron-icon');
                const isOpen = content.classList.contains('open');

                // Close all other modules
                moduleHeaders.forEach(h => {
                    if (h !== header) {
                        const otherModule = h.closest('.verification-module');
                        h.nextElementSibling.classList.remove('open');
                        h.classList.remove('open');
                        otherModule.classList.remove('open');
                        const otherIcon = h.querySelector('.chevron-icon');
                        if(otherIcon) otherIcon.style.transform = 'rotate(0deg)';
                    }
                });

                // Toggle the clicked module
                if (isOpen) {
                    content.classList.remove('open');
                    header.classList.remove('open');
                    module.classList.remove('open');
                    if(icon) icon.style.transform = 'rotate(0deg)';
                } else {
                    content.classList.add('open');
                    header.classList.add('open');
                    module.classList.add('open');
                    if(icon) icon.style.transform = 'rotate(180deg)';
                }
            };
            
            moduleHeaders.forEach(header => {
                header.addEventListener('click', () => toggleModule(header));
            });

            // Initially open the first module
            const firstModuleHeader = document.querySelector('.verification-module[data-module-id="1"] .module-header');
            if (firstModuleHeader) {
                toggleModule(firstModuleHeader);
            }


            // --- Generic Button Action Logic ---
            document.body.addEventListener('click', (e) => {
                const button = e.target.closest('button[data-action]');
                if (!button) return;

                // Stop propagation for buttons inside clickable headers
                e.stopPropagation(); 

                const action = button.dataset.action;
                const [type, ...valueParts] = action.split(':');
                const value = valueParts.join(':');

                if (type === 'alert') {
                    alert(value);
                } else if (type === 'url') {
                    window.open(value, '_blank', 'noopener,noreferrer');
                }
            });

            // --- Print Preview Modal Logic ---
            const printPreviewOverlay = document.getElementById('print-preview-overlay');
            const openPrintBtn = document.getElementById('open-print-preview');
            const closePrintBtn = document.getElementById('close-print-preview');
            const confirmPrintBtn = document.getElementById('confirm-print-preview');

            const openPrintModal = () => {
                if (printPreviewOverlay) {
                    printPreviewOverlay.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            };

            const closePrintModal = () => {
                if (printPreviewOverlay) {
                    printPreviewOverlay.style.display = 'none';
                    document.body.style.overflow = '';
                }
            };

            if (openPrintBtn) {
                openPrintBtn.addEventListener('click', openPrintModal);
            }

            if (closePrintBtn) {
                closePrintBtn.addEventListener('click', closePrintModal);
            }

            if (confirmPrintBtn) {
                confirmPrintBtn.addEventListener('click', () => {
                    closePrintModal();
                    window.print();
                });
            }

            // Close modal when clicking outside
            if (printPreviewOverlay) {
                printPreviewOverlay.addEventListener('click', (e) => {
                    if (e.target === printPreviewOverlay) {
                        closePrintModal();
                    }
                });
            }

            console.log('‚úÖ FLAME Verification Package Loaded Successfully');
            console.log('‚úÖ PDF Generation Functions Ready');
        });
    </script>
  </body>
</html>
