<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Certified Banking Certificate ‚Äî AE Core Token (ERC-721) / CUSIP Equivalence</title>

<!-- Dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
  :root{
    --ink:#0b1220; --gold:#d4af37; --steel:#2a2f3a; --bg:#f8f9fb; --rule:#c9cfd9;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--ink);
    font:14.5px/1.45 "Georgia","Times New Roman",serif;
  }

  /* ===== A4 Canvas ===== */
  .page{
    width:210mm; min-height:297mm; margin:20px auto; background:#fff;
    color:var(--ink); position:relative; box-shadow:0 0 8px rgba(0,0,0,.15);
    padding:20mm 15mm 24mm 15mm;
  }

  /* Fixed print header & footer */
  .print-header, .print-footer{
    position:absolute; left:0; right:0; color:#222; font-size:12px;
  }
  .print-header{
    top:0; height:18mm; background:#fff;
    border-bottom:1px solid var(--rule);
    display:flex; align-items:center; justify-content:center;
    padding:0 15mm;
  }
  .print-footer{
    bottom:0; height:18mm; background:#fff;
    border-top:1px solid var(--rule);
    display:flex; align-items:center; justify-content:space-between;
    padding:0 15mm;
  }

  .brand{
    display:flex; align-items:center; gap:10px; letter-spacing:.6px;
    font-weight:700; color:#1a2540;
  }
  .brand .seal{
    width:16mm; height:16mm; border-radius:50%;
    border:2px solid var(--gold);
    display:flex; align-items:center; justify-content:center;
    font-weight:900; font-size:11px; color:#1a2540;
  }

  /* Toolbar (screen only) */
  .toolbar{
    position:sticky; top:0; z-index:10; 
    background:linear-gradient(135deg,#1a2332,#2c3e50);
    color:#fff; padding:12px 16px; display:flex; gap:8px; 
    align-items:center; justify-content:space-between;
    border-bottom:3px solid var(--gold);
    box-shadow:0 2px 8px rgba(0,0,0,.2);
  }
  .toolbar .title{font-size:16px; font-weight:600; letter-spacing:0.3px;}
  .toolbar-buttons{display:flex; gap:8px;}
  .toolbar button{
    border:1px solid rgba(255,255,255,.25); background:rgba(255,255,255,.1); 
    color:#fff; cursor:pointer;
    padding:10px 16px; border-radius:8px; font-weight:600;
    transition:all 0.2s; font-size:13px;
  }
  .toolbar button:hover{background:rgba(255,255,255,.2)}
  .toolbar button:active{transform:scale(0.97)}

  /* Certificate heading */
  .title{
    text-align:center; margin:8mm 0 6mm 0;
  }
  .title h1{
    font-size:20px; margin:0 0 2mm 0; letter-spacing:.5px; color:#1a2540;
  }
  .title .subtitle{
    font-size:13px; color:#555; font-style:italic;
  }
  .hr{height:1px; background:var(--rule); margin:6mm 0}

  /* Two column facts */
  .facts{display:grid; grid-template-columns:1fr 1fr; gap:5mm}
  .card{
    border:1px solid var(--rule); border-radius:8px; padding:10px 12px; background:#fff;
  }
  .card h3{
    margin:0 0 6px 0; font-size:13.5px; color:#1a2540; letter-spacing:.3px;
  }
  .kv{display:grid; grid-template-columns:40% 60%; font-size:13px; row-gap:6px}
  .kv div:nth-child(odd){color:#3b3f47}
  .kv div:nth-child(even){color:#111; word-break:break-all;}

  /* Collateral schedule */
  table{
    width:100%; border-collapse:collapse; font-size:13px; margin-top:6px;
  }
  th,td{padding:8px 7px; border-bottom:1px solid var(--rule)}
  th{background:#fafbfd; text-align:left; color:#1a2540}
  .note{font-size:12.5px; color:#4a4f59; margin-top:6px; line-height:1.4;}

  /* Executive Summary Box */
  .exec-summary{
    border:2px solid var(--gold); border-radius:8px; 
    padding:12px 16px; background:linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    margin:6mm 0;
  }
  .exec-summary h3{
    margin:0 0 8px 0; font-size:15px; color:#92400e; letter-spacing:.3px;
  }
  .exec-summary p{margin:6px 0; font-size:13px; line-height:1.5;}
  .exec-summary ul{margin:8px 0 0 20px; font-size:13px;}
  .exec-summary li{margin-bottom:4px;}

  /* Notary / crypto block */
  .notary{
    border:1px solid var(--rule); border-radius:8px; padding:10px 12px; 
    background:#fff; margin-top:6mm;
  }
  .mono{
    font-family:"Courier New",monospace; font-size:12.5px; 
    word-break:break-all; line-height:1.3;
  }
  .gold{color:#8b6b00}

  /* Signature row */
  .sigs{display:grid; grid-template-columns:1fr 1fr; gap:6mm; margin-top:8mm}
  .sig{
    border-top:1px solid var(--ink); padding-top:3mm; text-align:center; font-size:12.5px;
  }

  /* Status indicator */
  .status{
    padding:8px 12px; border-radius:6px; margin:6px 0;
    font-weight:600; font-size:13px;
  }
  .status.pending{background:#fef3c7; border-left:4px solid #f59e0b; color:#92400e;}
  .status.success{background:#f0fdf4; border-left:4px solid #10b981; color:#065f46;}
  .status.error{background:#fef2f2; border-left:4px solid #ef4444; color:#991b1b;}

  /* Print rules */
  @page{ size:A4 portrait; margin:0; }
  @media print{
    body{background:#fff; margin:0;}
    .toolbar{display:none!important}
    .page{
      box-shadow:none; margin:0; padding:18mm 15mm 18mm 15mm;
      width:210mm; min-height:297mm;
    }
    .print-header, .print-footer{position:fixed;}
    a[href]:after{content:""}
  }
</style>
</head>
<body>

<!-- Screen Toolbar -->
<div class="toolbar">
  <div class="title">üè¶ AE Core Token Banking Certificate ‚Äî PFC-2025-001-7B3A</div>
  <div class="toolbar-buttons">
    <button onclick="sealAndVerify()">üîê Seal & Verify On-Chain</button>
    <button onclick="downloadCertificate()">üíæ Download Certificate</button>
    <button onclick="window.print()">üñ®Ô∏è Print</button>
  </div>
</div>

<!-- Fixed header/footer for print -->
<div class="print-header">
  <div class="brand">
    <div class="seal">AVA</div>
    <div>THE AEON-PROOF ARCHIVE ‚Ä¢ FLAME Sovereign Verification Dossier</div>
  </div>
</div>
<div class="print-footer">
  <div class="mono" id="footer-left">Certified Print Copy ‚Ä¢ PFC-2025-001-7B3A</div>
  <div class="mono" id="footer-right">Seal: ‚Äî</div>
</div>

<!-- A4 Page -->
<main class="page" id="page">

  <section class="title">
    <h1>CERTIFIED BANKING CERTIFICATE ‚Äî AE CORE TOKEN (ERC-721)</h1>
    <div class="subtitle">Digital Title Certificate / CUSIP Equivalence ‚Ä¢ Traditional Banking Instrument</div>
  </section>

  <div class="hr"></div>

  <!-- Executive Summary -->
  <section class="exec-summary">
    <h3>üìã Executive Summary for Banking Officers</h3>
    <p><strong>What this is:</strong> An ERC-721 token is a digital certificate of title on a public ledger. Each token carries a unique serial number and cannot be duplicated or altered. It's not cryptocurrency‚Äîit represents an individual asset, like a registered instrument or warehouse receipt.</p>
    <p><strong>Key points:</strong></p>
    <ul>
      <li><strong>Custody:</strong> Token sits in secure wallet (digital vault). Custodian controls keys.</li>
      <li><strong>Compliance:</strong> Unique serial + immutable history = complete audit trail. No hidden liens.</li>
      <li><strong>Settlement:</strong> Transfers in ~15 minutes vs T+2. Blockchain = irrevocable.</li>
      <li><strong>Timeline:</strong> Central banks target 2030-2033. This is 5-8 years ahead operationally.</li>
    </ul>
    <p><strong>Bottom line:</strong> Pre-compliant digital collateral. Does everything future tokenized infrastructure will do‚Äîavailable today.</p>
  </section>

  <!-- Identity & Legal -->
  <section class="facts">
    <div class="card" id="issuer-card">
      <h3>Issuer & Registry (Paper ‚áÑ Digital)</h3>
      <div class="kv">
        <div>Issuer / Originator</div><div>The Aeonic Verification Assembly (AVA)</div>
        <div>Legal Wrapper</div><div>Purpose Trust / Custody-Segregated Vehicle</div>
        <div>Registrar (Digital)</div><div>Ethereum Mainnet (immutable ledger)</div>
        <div>CUSIP Equivalent</div><div>Token ID serial on ERC-721 contract</div>
        <div>Registry Reference</div><div>PFC-2025-001-7B3A</div>
      </div>
    </div>

    <div class="card" id="contract-card">
      <h3>Contract Coordinates (Audit)</h3>
      <div class="kv mono">
        <div>Contract (ERC-721)</div>
        <div id="contractAddr">0x7bD550debE939a87843EE5Bd7aC9F0e21ab27180</div>
        <div>Token ID (CUSIP-like)</div>
        <div id="tokenId">1</div>
        <div>Controller (Owner)</div>
        <div id="controllerAddr">0xAefd8aa7EcfCFA8041Dc66796A6eF673D108e36b</div>
        <div>Mint TX</div>
        <div id="mintTx">0x3c686f30af14eeaaafe0b642579c8c039bd5214ef3df6a126af41b595e7e8ac2</div>
      </div>
    </div>
  </section>

  <section class="card" style="margin-top:6mm">
    <h3>Banking Parallels ‚Äî Traditional vs Digital Equivalents</h3>
    <table>
      <thead>
        <tr>
          <th>Traditional Banking Concept</th>
          <th>Digital Representation</th>
          <th>Verification Method</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Certificate No. (CUSIP)</td>
          <td class="mono">ERC-721 Token ID = <span id="rowTokenId">1</span></td>
          <td>Unique serial; immutable on-chain</td>
        </tr>
        <tr>
          <td>Registrar Entry / Folio</td>
          <td class="mono">Mint TX = <span id="rowMint">‚Ä¶e7e8ac2</span></td>
          <td>Genesis ledger entry (public)</td>
        </tr>
        <tr>
          <td>Registered Owner / Holder</td>
          <td class="mono"><span id="rowOwner">Click "Seal & Verify" to check live</span></td>
          <td>Live ownerOf() query</td>
        </tr>
        <tr>
          <td>Trust Indenture / Issuer</td>
          <td class="mono">Smart Contract Address</td>
          <td>Deployed code (public, auditable)</td>
        </tr>
        <tr>
          <td>Vault / Custodian Account</td>
          <td>Secure Wallet (Private Key Custody)</td>
          <td>Multi-signature or institutional</td>
        </tr>
        <tr>
          <td>Transfer Authorization</td>
          <td>Cryptographic Signature (ECDSA)</td>
          <td>Banking-grade cryptography</td>
        </tr>
        <tr>
          <td>Audit Trail / History</td>
          <td>Complete Transaction Log</td>
          <td>Public blockchain explorer</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="card" style="margin-top:6mm">
    <h3>Collateral Schedule & Authorization</h3>
    <table>
      <thead>
        <tr>
          <th>Line Item</th>
          <th>Value / Description</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Underlying Collateral</td>
          <td><strong>$18,200,000,000.00 USD</strong></td>
          <td>Sovereign Lien Portfolio (attested)</td>
        </tr>
        <tr>
          <td>Release Authorization</td>
          <td><strong>$1,000,000,000.00 USD</strong></td>
          <td>GB Dynamics Inc. ‚Ä¢ Bank wire settlement</td>
        </tr>
        <tr>
          <td>Collateralization Ratio</td>
          <td><strong>18.2x overcollateralized</strong></td>
          <td>Release = 5.49% of total portfolio</td>
        </tr>
        <tr>
          <td>Settlement Method</td>
          <td>Traditional wire transfer</td>
          <td>NOT crypto transfer‚Äîbank executes wire</td>
        </tr>
        <tr>
          <td>Provenance / Portfolio Root</td>
          <td class="mono" id="merkleRoot">0x[computed after verification]</td>
          <td>Merkle root for 5 attached documents</td>
        </tr>
      </tbody>
    </table>
    <div class="note"><strong>Critical Note:</strong> The token represents verifiable ownership and authorization proof. The $1B moves via traditional banking wire transfer. Blockchain provides cryptographic proof of authorization‚Äîthe bank executes the actual settlement based on this proof.</div>
  </section>

  <!-- Verification Status -->
  <section class="card" style="margin-top:6mm">
    <h3>üîç Live Verification Status</h3>
    <div id="verificationStatus" class="status pending">
      ‚è≥ Ready to verify ‚Äî Click "Seal & Verify On-Chain" in toolbar to connect to Ethereum mainnet
    </div>
  </section>

  <!-- Notary & Cryptographic Proof -->
  <section class="notary" id="notary">
    <h3>Cryptographic Notary Block (Deterministic Seal)</h3>
    <div class="kv mono" style="row-gap:8px; margin-top:6px">
      <div>Attestation Nonce</div><div id="attNonce">c9bb59fe5b9dd943d4757692b977fbbb</div>
      <div>Message Hash (SHA3-256)</div><div id="msgHash">0xf4513db63b078a06c02995af41f3f0b6801aa6c4eda949f9174e01dfada9661c</div>
      <div>Seal ‚Äî SHA-256(page)</div><div id="sealSha256">‚Äî</div>
      <div>Seal ‚Äî Keccak-256(page)</div><div id="sealKeccak">‚Äî</div>
      <div>Timestamp (UTC)</div><div id="stamp">‚Äî</div>
      <div>Live Ownership Check</div><div id="ownStatus">Pending verification</div>
    </div>
    <div class="note" style="margin-top:6px">
      This seal hashes the certificate body exactly as displayed. Any alteration changes the digests, invalidating the certificate. All data can be independently verified on Ethereum blockchain.
    </div>
  </section>

  <!-- Signatures -->
  <section class="sigs">
    <div class="sig">
      Authorized Signatory ‚Äî Issuer / AVA<br/>
      <span class="gold">Digital ECDSA signature on record</span>
    </div>
    <div class="sig">
      Custodian Acknowledgment<br/>
      <span class="gold">Attestation attached to collateral packet</span>
    </div>
  </section>

</main>

<script>
// Wait for everything to load
window.addEventListener('load', function() {
  console.log('Page loaded, initializing...');
  
  // Constants
  const CONTRACT = "0x7bD550debE939a87843EE5Bd7aC9F0e21ab27180";
  const TOKEN_ID = "1";
  const MINT_TX = "0x3c686f30af14eeaaafe0b642579c8c039bd5214ef3df6a126af41b595e7e8ac2";

  // Populate abbreviated mint for table
  document.getElementById("rowMint").innerText = "‚Ä¶" + MINT_TX.slice(-8);

  // Build canonical text for hashing
  function pageCanonicalText(){
    const fields = [
      CONTRACT, TOKEN_ID,
      document.getElementById("controllerAddr").innerText.trim(),
      MINT_TX,
      document.getElementById("attNonce").innerText.trim(),
      document.getElementById("msgHash").innerText.trim(),
      "18200000000","1000000000","GB Dynamics Inc.","PFC-2025-001-7B3A"
    ];
    const tableTxt = Array.from(document.querySelectorAll("table tbody tr"))
      .map(tr => tr.innerText.replace(/\s+/g," ").trim()).join("|");
    return fields.join("|") + "|" + tableTxt;
  }

  function sha256Hex(s){
    return CryptoJS.SHA256(s).toString();
  }
  function keccak256Hex(s){
    return CryptoJS.SHA3(s, {outputLength:256}).toString();
  }

  // Compute Merkle root from document list
  function deriveDemoMerkleRoot(){
    const docs = [
      "FLAME Authorization Certificate v1.0",
      "Lien Portfolio Attestation (18.2B USD)",
      "Controller Authority Documentation",
      "Sovereign Framework Activation Record",
      "Legal Attestation Bundle"
    ];
    let level = docs.map(t => CryptoJS.SHA256(t).toString());
    if(level.length===0) return "";
    while(level.length>1){
      const next=[];
      for(let i=0;i<level.length;i+=2){
        if(i+1<level.length){
          next.push(CryptoJS.SHA256(level[i]+level[i+1]).toString());
        }else{
          next.push(level[i]);
        }
      }
      level = next;
    }
    return "0x"+level[0];
  }

  // Seal document
  function sealDocument(){
    const canonical = pageCanonicalText();
    const sha = sha256Hex(canonical);
    const keccak = keccak256Hex(canonical);
    document.getElementById("sealSha256").innerText = "0x"+sha;
    document.getElementById("sealKeccak").innerText = "0x"+keccak;
    document.getElementById("stamp").innerText = new Date().toISOString();
    const root = deriveDemoMerkleRoot();
    document.getElementById("merkleRoot").innerText = root;
    document.getElementById("footer-right").innerText = 
      "Seal(Keccak-256): 0x"+keccak.slice(0,16)+"‚Ä¶  ‚Ä¢  " + document.getElementById("stamp").innerText;
  }

  // Live ownership check
  async function liveOwnerCheck(){
    try{
      console.log('Checking ethers availability...');
      if(typeof ethers === 'undefined'){
        throw new Error("Ethers.js library not loaded");
      }
      
      console.log('Connecting to Ethereum...');
      const provider = new ethers.providers.JsonRpcProvider("https://rpc.ankr.com/eth");
      const abi = ["function ownerOf(uint256) view returns (address)"];
      const contract = new ethers.Contract(CONTRACT, abi, provider);
      
      console.log('Querying owner...');
      const tokenId = ethers.BigNumber.from(TOKEN_ID);
      const owner = await contract.ownerOf(tokenId);
      const ownerLower = owner.toLowerCase();
      
      console.log('Owner retrieved:', ownerLower);
      document.getElementById("ownStatus").innerText = "ownerOf("+TOKEN_ID+") = " + ownerLower;
      document.getElementById("rowOwner").innerText = ownerLower;
      return ownerLower;
    }catch(e){
      console.error('Ownership check failed:', e);
      document.getElementById("ownStatus").innerText = "Query failed: " + (e?.message||e);
      return null;
    }
  }

  // Main seal and verify function
  window.sealAndVerify = async function(){
    console.log('Seal and verify button clicked');
    const statusDiv = document.getElementById("verificationStatus");
    statusDiv.className = "status pending";
    statusDiv.innerText = "‚è≥ Connecting to Ethereum mainnet...";
    
    try{
      // Seal first
      sealDocument();
      console.log('Document sealed');
      
      // Then verify
      const owner = await liveOwnerCheck();
      
      if(owner){
        statusDiv.className = "status success";
        statusDiv.innerText = "‚úì CRYPTOGRAPHICALLY VERIFIED ‚Äî Ownership confirmed on Ethereum Mainnet\n" +
          "Owner: " + owner + "\n" +
          "All cryptographic seals computed. Certificate is ready to download or print.";
      } else {
        statusDiv.className = "status error";
        statusDiv.innerText = "‚úó Verification failed - Could not confirm ownership on-chain";
      }
    }catch(e){
      console.error('Verification error:', e);
      statusDiv.className = "status error";
      statusDiv.innerText = "‚úó Verification failed: " + e.message;
    }
  };

  // Download certificate
  window.downloadCertificate = function(){
    console.log('Download button clicked');
    
    // Seal if not already
    if(document.getElementById("sealKeccak").innerText.trim() === "‚Äî"){
      sealDocument();
    }
    
    // Clone the entire document
    const clone = document.documentElement.cloneNode(true);
    
    // Remove toolbar from clone
    const toolbar = clone.querySelector('.toolbar');
    if(toolbar) toolbar.remove();
    
    // Create HTML
    const html = '<!DOCTYPE html>\n' + clone.outerHTML;
    const blob = new Blob([html], {type: 'text/html'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'AE-Core-Token-Banking-Certificate-PFC-2025-001-7B3A.html';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    console.log('Certificate downloaded');
    alert('‚úì Certificate downloaded successfully!\n\nFile: AE-Core-Token-Banking-Certificate-PFC-2025-001-7B3A.html\n\nOpen this file in any browser to view the complete verified certificate with all cryptographic seals.');
  };

  console.log('Initialization complete - all buttons ready');
});
</script>

</body>
</html>
