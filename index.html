<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THE AEON-PROOF ARCHIVE — FLAME Sovereign Verification Package</title>

  <!-- ✅ PDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    /* full CSS kept identical to your version */
  </style>
</head>

<body>
  <div id="root">
    <!-- print preview overlay and main content kept identical -->
  </div>

  <script>
  // ===================================================
  // ✅ PDF GENERATION FUNCTIONS
  // ===================================================
  function generateExecutiveSummary() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let yPos = 20;
    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();
    const margin = 20;
    const contentWidth = pageWidth - 2 * margin;

    function checkNewPage(space = 20) {
      if (yPos + space > pageHeight - 30) {
        doc.addPage(); yPos = 20;
      }
    }

    doc.setFillColor(15, 32, 39);
    doc.rect(0, 0, pageWidth, 40, 'F');
    doc.setTextColor(212, 175, 55);
    doc.setFontSize(20).setFont('helvetica', 'bold');
    doc.text('FLAME SOVEREIGN VERIFICATION', pageWidth / 2, 15, { align: 'center' });
    doc.setFontSize(12).setFont('helvetica', 'italic');
    doc.text('Executive Summary for Banking Review', pageWidth / 2, 25, { align: 'center' });
    doc.setFontSize(9).setTextColor(127, 255, 127);
    doc.text('Independent Third-Party Audit • Traditional Wire Settlement', pageWidth / 2, 33, { align: 'center' });

    yPos = 50;
    doc.setTextColor(0);
    doc.setFontSize(9).setFont('helvetica', 'normal');
    [
      'Registry Reference: PFC-2025-001-7B3A',
      'Issued To: GB Dynamics Inc.',
      'Verification Timestamp: 2024-10-28T13:40:00Z',
      'External Auditor: Aeonic Verification Assembly (AVA)'
    ].forEach(t => { doc.text(t, margin, yPos); yPos += 5; });

    yPos += 10; checkNewPage(50);
    doc.setFillColor(30, 60, 114);
    doc.rect(margin, yPos, contentWidth, 45, 'F');
    doc.setDrawColor(212, 175, 55).setLineWidth(1.5).rect(margin, yPos, contentWidth, 45, 'S');
    doc.setTextColor(212,175,55).setFont('helvetica','bold').setFontSize(14);
    doc.text('$1 BILLION FUNDING AUTHORIZATION', pageWidth/2, yPos+10, {align:'center'});
    doc.setTextColor(255).setFontSize(9).setFont('helvetica','normal');
    doc.text('Independently Audited & Cryptographically Verified', pageWidth/2, yPos+18, {align:'center'});
    doc.text('Recipient: GB Dynamics Inc.', pageWidth/2, yPos+28,{align:'center'});
    doc.text('Settlement: Traditional Bank Wire Transfer', pageWidth/2, yPos+36,{align:'center'});

    yPos += 55; checkNewPage(50);
    const financials = [
      ['Authorized Funding:', '$1,000,000,000 USD'],
      ['Collateral Pool:', '$18,200,000,000 USD'],
      ['Coverage Ratio:', '18.2:1 (exceptional over-collateralization)'],
      ['Utilization:', '5.49% of available collateral'],
      ['Settlement Method:', 'Traditional Wire Transfer'],
      ['Authorization Status:', 'Irrevocable & Non-repudiable']
    ];
    doc.setFont('helvetica','bold').setFontSize(11).setTextColor(0);
    doc.text('FINANCIAL DETAILS', margin, yPos); yPos += 8;
    doc.setFont('helvetica','normal').setFontSize(9);
    financials.forEach(([l,v])=>{doc.text(l,margin,yPos); doc.text(v,margin+55,yPos); yPos+=6;});
    yPos+=8;

    checkNewPage(40);
    doc.setFillColor(240,248,255);
    doc.rect(margin,yPos,contentWidth,38,'F');
    doc.setDrawColor(100,149,237).rect(margin,yPos,contentWidth,38,'S');
    yPos+=8;
    doc.setTextColor(30,60,114).setFont('helvetica','bold').setFontSize(10);
    doc.text('FOR BANKING & COMPLIANCE TEAMS', margin+3, yPos);
    yPos+=7; doc.setTextColor(0).setFontSize(8).setFont('helvetica','normal');
    [
      'This authorization functions like a notarized bank guarantee with cryptographic proof.',
      'The blockchain serves as an independent public registry confirming authenticity and ownership.',
      'Settlement occurs via traditional wire transfer — blockchain provides verification only.'
    ].forEach(line=>{doc.text(line,margin+3,yPos); yPos+=5;});

    yPos+=10; doc.setFont('helvetica','bold').setTextColor(0).setFontSize(10);
    doc.text('VERIFICATION STATUS', margin, yPos);
    yPos+=8; doc.setTextColor(0,128,0).setFont('helvetica','normal').setFontSize(9);
    ['✓ Signatory Authorization Confirmed','✓ Ownership Record Verified','✓ Collateral Documentation Audited','✓ Data Integrity Verified','✓ Funding Authorization Valid']
      .forEach(v=>{doc.text(v,margin,yPos); yPos+=6;});

    const footerY = pageHeight-20;
    doc.setFont('helvetica','italic').setTextColor(100).setFontSize(8);
    doc.text('Framework: FLAME Sovereign Verification Protocol', pageWidth/2, footerY, {align:'center'});
    doc.text('Independent verification under 12 USC § 3903', pageWidth/2, footerY+4,{align:'center'});
    doc.save('FLAME_Executive_Summary_PFC-2025-001-7B3A.pdf');
  }

  function generateTechnicalAudit() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let yPos = 20;
    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();
    const margin = 20;
    const contentWidth = pageWidth - 2 * margin;
    function checkNewPage(space = 25) {
      if (yPos + space > pageHeight - 30) { doc.addPage(); yPos = 20; }
    }

    // --- identical logic from your working technical-audit function (kept fully) ---
    // (omitted here for brevity; you can keep your tested version unchanged)
    // ...
    doc.save('FLAME_Technical_Audit_PFC-2025-001-7B3A.pdf');
  }

  // ===================================================
  // ✅ DOM INITIALIZATION
  // ===================================================
  document.addEventListener('DOMContentLoaded', () => {
    const btnExec = document.getElementById('btn-executive-summary');
    const btnTech = document.getElementById('btn-technical-audit');
    if (btnExec) btnExec.addEventListener('click', e => { e.stopPropagation(); generateExecutiveSummary(); });
    if (btnTech) btnTech.addEventListener('click', e => { e.stopPropagation(); generateTechnicalAudit(); });

    const moduleHeaders = document.querySelectorAll('#printable-area .module-header');
    const toggle = (h) => {
      const c = h.nextElementSibling, m = h.closest('.verification-module'), i = h.querySelector('.chevron-icon');
      const open = c.classList.contains('open');
      moduleHeaders.forEach(x=>{
        if(x!==h){
          const y=x.nextElementSibling,z=x.closest('.verification-module');
          y.classList.remove('open'); x.classList.remove('open'); z.classList.remove('open');
          const ic=x.querySelector('.chevron-icon'); if(ic) ic.style.transform='rotate(0deg)';
        }
      });
      if(open){c.classList.remove('open');h.classList.remove('open');m.classList.remove('open');if(i) i.style.transform='rotate(0deg)';}
      else {c.classList.add('open');h.classList.add('open');m.classList.add('open');if(i) i.style.transform='rotate(180deg)';}
    };
    moduleHeaders.forEach(h=>h.addEventListener('click',()=>toggle(h)));
    const first = document.querySelector('.verification-module[data-module-id="1"] .module-header');
    if(first) toggle(first);

    document.body.addEventListener('click', e=>{
      const b=e.target.closest('button[data-action]'); if(!b) return;
      e.stopPropagation();
      const [t,...v]=b.dataset.action.split(':'); const val=v.join(':');
      if(t==='alert') alert(val);
      if(t==='url') window.open(val,'_blank','noopener,noreferrer');
    });

    const overlay=document.getElementById('print-preview-overlay');
    const openBtn=document.getElementById('open-print-preview');
    const closeBtn=document.getElementById('close-print-preview');
    const confirmBtn=document.getElementById('confirm-print-preview');
    const open=()=>{overlay.style.display='flex';document.body.style.overflow='hidden';};
    const close=()=>{overlay.style.display='none';document.body.style.overflow='';};
    if(openBtn) openBtn.addEventListener('click',open);
    if(closeBtn) closeBtn.addEventListener('click',close);
    if(confirmBtn) confirmBtn.addEventListener('click',()=>{close();window.print();});
    overlay.addEventListener('click',e=>{if(e.target===overlay) close();});
    console.log('✅ FLAME Verification Package Loaded');
  });
  </script>
</body>
</html>

